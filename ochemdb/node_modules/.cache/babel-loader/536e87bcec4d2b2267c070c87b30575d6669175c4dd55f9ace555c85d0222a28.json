{"ast":null,"code":"import React,{useState}from\"react\";import{useCart}from\"./CartContext\";// Import cart context\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function NavBar(){const{cart,removeFromCart}=useCart();// Access cart data and remove functionality\nconst[showCart,setShowCart]=useState(false);// State to toggle cart dropdown visibility\nconst[showModal,setShowModal]=useState(false);const toggleCart=()=>setShowCart(prev=>!prev);// Toggle cart visibility\nconst closeModal=()=>setShowModal(false);const handleTableClick=event=>{if(cart.length===0){event.preventDefault();// Prevent navigation\nsetShowModal(true);// Show modal instead\n}};const generateTable=async()=>{try{const response=await fetch(\"http://127.0.0.1:5000/generate-table\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({cart})// Send the cart data to the backend\n});if(!response.ok){throw new Error(\"Failed to generate the table.\");}const blob=await response.blob();const url=window.URL.createObjectURL(blob);const link=document.createElement(\"a\");link.href=url;link.download=\"chemicals_table.xlsx\";// File name for the download\ndocument.body.appendChild(link);link.click();document.body.removeChild(link);}catch(error){console.error(\"Error generating table:\",error);alert(\"Failed to generate the table. Please try again.\");}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"nav\",{className:\"nav\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"/\",className:\"site-title\",children:\"Ochem Database\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(CustomLink,{href:\"/about\",children:\"About\"}),/*#__PURE__*/_jsx(CustomLink,{href:\"/instructions\",children:\"Instructions\"}),/*#__PURE__*/_jsx(CustomLink,{href:\"/request\",children:\"Request A Chemical\"}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/table\",onClick:handleTableClick,className:\"generate-table-btn\",children:\"Generate Table\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-icon-container\",children:[/*#__PURE__*/_jsxs(\"div\",{onClick:toggleCart,className:\"cart-icon\",children:[\"\\uD83D\\uDED2\",cart.length>0&&/*#__PURE__*/_jsx(\"span\",{className:\"cart-badge\",children:cart.length})]}),showCart&&/*#__PURE__*/_jsxs(\"div\",{className:\"cart-popup\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Cart\"}),cart.length>0?/*#__PURE__*/_jsx(\"ul\",{children:cart.map((item,index)=>/*#__PURE__*/_jsxs(\"li\",{className:\"cart-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:item.name}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeFromCart(item.name),children:\"Remove\"})]},index))}):/*#__PURE__*/_jsx(\"p\",{children:\"Your cart is empty.\"})]})]})]}),showModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Cart is Empty\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Please add a chemical to the cart to generate a table.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:closeModal,className:\"close-button\",children:\"Close\"})]})})]});}function CustomLink(_ref){let{href,children,...props}=_ref;const path=window.location.pathname;return/*#__PURE__*/_jsx(\"li\",{className:path===href?\"active\":\"\",children:/*#__PURE__*/_jsx(\"a\",{href:href,...props,children:children})});}","map":{"version":3,"names":["React","useState","useCart","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","NavBar","cart","removeFromCart","showCart","setShowCart","showModal","setShowModal","toggleCart","prev","closeModal","handleTableClick","event","length","preventDefault","generateTable","response","fetch","method","headers","body","JSON","stringify","ok","Error","blob","url","window","URL","createObjectURL","link","document","createElement","href","download","appendChild","click","removeChild","error","console","alert","children","className","CustomLink","onClick","map","item","index","name","_ref","props","path","location","pathname"],"sources":["/Users/aadi/Desktop/Ochem Database Backend/ochemdb/src/NavBar.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useCart } from \"./CartContext\"; // Import cart context\n\nexport default function NavBar() {\n  const { cart, removeFromCart } = useCart(); // Access cart data and remove functionality\n  const [showCart, setShowCart] = useState(false); // State to toggle cart dropdown visibility\n  const [showModal, setShowModal] = useState(false);\n\n  const toggleCart = () => setShowCart((prev) => !prev); // Toggle cart visibility\n\n  const closeModal = () => setShowModal(false);\n\n  const handleTableClick = (event) => {\n    if (cart.length === 0) {\n      event.preventDefault(); // Prevent navigation\n      setShowModal(true); // Show modal instead\n    }\n  };\n\n  const generateTable = async () => {\n    try {\n      const response = await fetch(\"http://127.0.0.1:5000/generate-table\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ cart }), // Send the cart data to the backend\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Failed to generate the table.\");\n      }\n\n      const blob = await response.blob();\n      const url = window.URL.createObjectURL(blob);\n      const link = document.createElement(\"a\");\n      link.href = url;\n      link.download = \"chemicals_table.xlsx\"; // File name for the download\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    } catch (error) {\n      console.error(\"Error generating table:\", error);\n      alert(\"Failed to generate the table. Please try again.\");\n    }\n  };\n\n  return (\n    <>\n      <nav className=\"nav\">\n        <a href=\"/\" className=\"site-title\">\n          Ochem Database\n        </a>\n        <ul>\n          <CustomLink href=\"/about\">About</CustomLink>\n          <CustomLink href=\"/instructions\">Instructions</CustomLink>\n          <CustomLink href=\"/request\">Request A Chemical</CustomLink>\n          <li>\n            <a\n              href=\"/table\"\n              onClick={handleTableClick}\n              className=\"generate-table-btn\"\n            >\n              Generate Table\n            </a>\n          </li>\n        </ul>\n\n        <div className=\"cart-icon-container\">\n          <div onClick={toggleCart} className=\"cart-icon\">\n            ðŸ›’\n            {cart.length > 0 && (\n              <span className=\"cart-badge\">{cart.length}</span>\n            )}\n          </div>\n\n          {showCart && (\n            <div className=\"cart-popup\">\n              <h4>Cart</h4>\n              {cart.length > 0 ? (\n                <ul>\n                  {cart.map((item, index) => (\n                    <li key={index} className=\"cart-item\">\n                      <span>{item.name}</span>\n                      <button onClick={() => removeFromCart(item.name)}>\n                        Remove\n                      </button>\n                    </li>\n                  ))}\n                </ul>\n              ) : (\n                <p>Your cart is empty.</p>\n              )}\n            </div>\n          )}\n        </div>\n      </nav>\n\n      {/* Modal Popup */}\n      {showModal && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal-content\">\n            <h2>Cart is Empty</h2>\n            <p>Please add a chemical to the cart to generate a table.</p>\n            <button onClick={closeModal} className=\"close-button\">\n              Close\n            </button>\n          </div>\n        </div>\n      )}\n    </>\n  );\n}\n\nfunction CustomLink({ href, children, ...props }) {\n  const path = window.location.pathname;\n  return (\n    <li className={path === href ? \"active\" : \"\"}>\n      <a href={href} {...props}>\n        {children}\n      </a>\n    </li>\n  );\n}\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,OAAO,KAAQ,eAAe,CAAE;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEzC,cAAe,SAAS,CAAAC,MAAMA,CAAA,CAAG,CAC/B,KAAM,CAAEC,IAAI,CAAEC,cAAe,CAAC,CAAGT,OAAO,CAAC,CAAC,CAAE;AAC5C,KAAM,CAACU,QAAQ,CAAEC,WAAW,CAAC,CAAGZ,QAAQ,CAAC,KAAK,CAAC,CAAE;AACjD,KAAM,CAACa,SAAS,CAAEC,YAAY,CAAC,CAAGd,QAAQ,CAAC,KAAK,CAAC,CAEjD,KAAM,CAAAe,UAAU,CAAGA,CAAA,GAAMH,WAAW,CAAEI,IAAI,EAAK,CAACA,IAAI,CAAC,CAAE;AAEvD,KAAM,CAAAC,UAAU,CAAGA,CAAA,GAAMH,YAAY,CAAC,KAAK,CAAC,CAE5C,KAAM,CAAAI,gBAAgB,CAAIC,KAAK,EAAK,CAClC,GAAIV,IAAI,CAACW,MAAM,GAAK,CAAC,CAAE,CACrBD,KAAK,CAACE,cAAc,CAAC,CAAC,CAAE;AACxBP,YAAY,CAAC,IAAI,CAAC,CAAE;AACtB,CACF,CAAC,CAED,KAAM,CAAAQ,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,sCAAsC,CAAE,CACnEC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEpB,IAAK,CAAC,CAAG;AAClC,CAAC,CAAC,CAEF,GAAI,CAACc,QAAQ,CAACO,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,CAAC,+BAA+B,CAAC,CAClD,CAEA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAT,QAAQ,CAACS,IAAI,CAAC,CAAC,CAClC,KAAM,CAAAC,GAAG,CAAGC,MAAM,CAACC,GAAG,CAACC,eAAe,CAACJ,IAAI,CAAC,CAC5C,KAAM,CAAAK,IAAI,CAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC,CACxCF,IAAI,CAACG,IAAI,CAAGP,GAAG,CACfI,IAAI,CAACI,QAAQ,CAAG,sBAAsB,CAAE;AACxCH,QAAQ,CAACX,IAAI,CAACe,WAAW,CAACL,IAAI,CAAC,CAC/BA,IAAI,CAACM,KAAK,CAAC,CAAC,CACZL,QAAQ,CAACX,IAAI,CAACiB,WAAW,CAACP,IAAI,CAAC,CACjC,CAAE,MAAOQ,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CAC/CE,KAAK,CAAC,iDAAiD,CAAC,CAC1D,CACF,CAAC,CAED,mBACE1C,KAAA,CAAAE,SAAA,EAAAyC,QAAA,eACE3C,KAAA,QAAK4C,SAAS,CAAC,KAAK,CAAAD,QAAA,eAClB7C,IAAA,MAAGqC,IAAI,CAAC,GAAG,CAACS,SAAS,CAAC,YAAY,CAAAD,QAAA,CAAC,gBAEnC,CAAG,CAAC,cACJ3C,KAAA,OAAA2C,QAAA,eACE7C,IAAA,CAAC+C,UAAU,EAACV,IAAI,CAAC,QAAQ,CAAAQ,QAAA,CAAC,OAAK,CAAY,CAAC,cAC5C7C,IAAA,CAAC+C,UAAU,EAACV,IAAI,CAAC,eAAe,CAAAQ,QAAA,CAAC,cAAY,CAAY,CAAC,cAC1D7C,IAAA,CAAC+C,UAAU,EAACV,IAAI,CAAC,UAAU,CAAAQ,QAAA,CAAC,oBAAkB,CAAY,CAAC,cAC3D7C,IAAA,OAAA6C,QAAA,cACE7C,IAAA,MACEqC,IAAI,CAAC,QAAQ,CACbW,OAAO,CAAEjC,gBAAiB,CAC1B+B,SAAS,CAAC,oBAAoB,CAAAD,QAAA,CAC/B,gBAED,CAAG,CAAC,CACF,CAAC,EACH,CAAC,cAEL3C,KAAA,QAAK4C,SAAS,CAAC,qBAAqB,CAAAD,QAAA,eAClC3C,KAAA,QAAK8C,OAAO,CAAEpC,UAAW,CAACkC,SAAS,CAAC,WAAW,CAAAD,QAAA,EAAC,cAE9C,CAACvC,IAAI,CAACW,MAAM,CAAG,CAAC,eACdjB,IAAA,SAAM8C,SAAS,CAAC,YAAY,CAAAD,QAAA,CAAEvC,IAAI,CAACW,MAAM,CAAO,CACjD,EACE,CAAC,CAELT,QAAQ,eACPN,KAAA,QAAK4C,SAAS,CAAC,YAAY,CAAAD,QAAA,eACzB7C,IAAA,OAAA6C,QAAA,CAAI,MAAI,CAAI,CAAC,CACZvC,IAAI,CAACW,MAAM,CAAG,CAAC,cACdjB,IAAA,OAAA6C,QAAA,CACGvC,IAAI,CAAC2C,GAAG,CAAC,CAACC,IAAI,CAAEC,KAAK,gBACpBjD,KAAA,OAAgB4C,SAAS,CAAC,WAAW,CAAAD,QAAA,eACnC7C,IAAA,SAAA6C,QAAA,CAAOK,IAAI,CAACE,IAAI,CAAO,CAAC,cACxBpD,IAAA,WAAQgD,OAAO,CAAEA,CAAA,GAAMzC,cAAc,CAAC2C,IAAI,CAACE,IAAI,CAAE,CAAAP,QAAA,CAAC,QAElD,CAAQ,CAAC,GAJFM,KAKL,CACL,CAAC,CACA,CAAC,cAELnD,IAAA,MAAA6C,QAAA,CAAG,qBAAmB,CAAG,CAC1B,EACE,CACN,EACE,CAAC,EACH,CAAC,CAGLnC,SAAS,eACRV,IAAA,QAAK8C,SAAS,CAAC,eAAe,CAAAD,QAAA,cAC5B3C,KAAA,QAAK4C,SAAS,CAAC,eAAe,CAAAD,QAAA,eAC5B7C,IAAA,OAAA6C,QAAA,CAAI,eAAa,CAAI,CAAC,cACtB7C,IAAA,MAAA6C,QAAA,CAAG,wDAAsD,CAAG,CAAC,cAC7D7C,IAAA,WAAQgD,OAAO,CAAElC,UAAW,CAACgC,SAAS,CAAC,cAAc,CAAAD,QAAA,CAAC,OAEtD,CAAQ,CAAC,EACN,CAAC,CACH,CACN,EACD,CAAC,CAEP,CAEA,QAAS,CAAAE,UAAUA,CAAAM,IAAA,CAA+B,IAA9B,CAAEhB,IAAI,CAAEQ,QAAQ,CAAE,GAAGS,KAAM,CAAC,CAAAD,IAAA,CAC9C,KAAM,CAAAE,IAAI,CAAGxB,MAAM,CAACyB,QAAQ,CAACC,QAAQ,CACrC,mBACEzD,IAAA,OAAI8C,SAAS,CAAES,IAAI,GAAKlB,IAAI,CAAG,QAAQ,CAAG,EAAG,CAAAQ,QAAA,cAC3C7C,IAAA,MAAGqC,IAAI,CAAEA,IAAK,IAAKiB,KAAK,CAAAT,QAAA,CACrBA,QAAQ,CACR,CAAC,CACF,CAAC,CAET","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}