{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from\"axios\";import\"./TablePage.css\";// Add styles for the table\nimport{useCart}from\"../CartContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function TablePage(){const{cart}=useCart();// Access cart data from context\nconst[tableData,setTableData]=useState([]);const[loading,setLoading]=useState(false);// Fetch table data from backend\nconst generateTable=async()=>{if(cart.length===0){alert(\"table.jsCart is empty! Please add items to the cart.\");return;}console.log(\"Table Data:\",tableData);console.log(\"Cart contents:\",cart);setLoading(true);try{const response=await axios.post(\"http://127.0.0.1:5000/generate-table\",{cart});setTableData(response.data);}catch(error){console.error(\"Error generating table:\",error);}setLoading(false);};useEffect(()=>{generateTable();},[]);// Handle changes to editable fields\nconst handleFieldChange=(index,field,value)=>{const updatedTableData=[...tableData];updatedTableData[index][field]=value;setTableData(updatedTableData);};// Download table as Excel\nconst downloadTable=async()=>{if(tableData.length===0){alert(\"No table data to download!\");return;}try{const response=await axios.post(\"http://127.0.0.1:5000/export-table\",tableData,{responseType:\"blob\"}// Ensure file response type\n);const blob=new Blob([response.data],{type:\"application/pdf\"});const url=window.URL.createObjectURL(blob);const link=document.createElement(\"a\");link.href=url;link.setAttribute(\"download\",\"ChemicalTable.pdf\");// Set filename\ndocument.body.appendChild(link);link.click();document.body.removeChild(link);}catch(error){console.error(\"Error exporting table:\",error);alert(\"Failed to download table.\");}};return/*#__PURE__*/_jsx(\"div\",{className:\"table-page\",children:tableData.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"table\",{className:\"chemical-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Molecular Weight(g/mol)\"}),/*#__PURE__*/_jsx(\"th\",{children:\"mmol\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Equivalents\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Melting/Boiling Point\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Density\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Hazards\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:tableData.map((row,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:row.Name}),/*#__PURE__*/_jsx(\"td\",{children:row[\"Molecular Weight\"]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:row.mmol,onChange:e=>handleFieldChange(index,\"mmol\",e.target.value)})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:row.Equivalents,onChange:e=>handleFieldChange(index,\"Equivalents\",e.target.value)})}),/*#__PURE__*/_jsx(\"td\",{children:row[\"Melting Point/Boiling Point\"]}),/*#__PURE__*/_jsx(\"td\",{children:row.Density}),/*#__PURE__*/_jsx(\"td\",{children:Array.isArray(row.Hazards)?row.Hazards.map((hazard,i)=>/*#__PURE__*/_jsxs(\"span\",{children:[hazard,/*#__PURE__*/_jsx(\"br\",{})]},i)):row.Hazards})]},index))})]}),/*#__PURE__*/_jsx(\"button\",{onClick:downloadTable,className:\"download-table-button\",children:\"Download Table as PDF\"})]})});}","map":{"version":3,"names":["React","useEffect","useState","axios","useCart","jsx","_jsx","jsxs","_jsxs","TablePage","cart","tableData","setTableData","loading","setLoading","generateTable","length","alert","console","log","response","post","data","error","handleFieldChange","index","field","value","updatedTableData","downloadTable","responseType","blob","Blob","type","url","window","URL","createObjectURL","link","document","createElement","href","setAttribute","body","appendChild","click","removeChild","className","children","map","row","Name","mmol","onChange","e","target","Equivalents","Density","Array","isArray","Hazards","hazard","i","onClick"],"sources":["/Users/aadi/Desktop/Ochem Database Backend/ochemdb/src/pages/table.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport \"./TablePage.css\"; // Add styles for the table\nimport { useCart } from \"../CartContext\";\n\nexport default function TablePage() {\n  const { cart } = useCart(); // Access cart data from context\n  const [tableData, setTableData] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  // Fetch table data from backend\n  const generateTable = async () => {\n    if (cart.length === 0) {\n      alert(\"table.jsCart is empty! Please add items to the cart.\");\n      return;\n    }\n    console.log(\"Table Data:\", tableData);\n    console.log(\"Cart contents:\", cart);\n\n    setLoading(true);\n    try {\n      const response = await axios.post(\n        \"http://127.0.0.1:5000/generate-table\",\n        { cart }\n      );\n      setTableData(response.data);\n    } catch (error) {\n      console.error(\"Error generating table:\", error);\n    }\n    setLoading(false);\n  };\n\n  useEffect(() => {\n    generateTable();\n  }, []);\n\n  // Handle changes to editable fields\n  const handleFieldChange = (index, field, value) => {\n    const updatedTableData = [...tableData];\n    updatedTableData[index][field] = value;\n    setTableData(updatedTableData);\n  };\n\n  // Download table as Excel\n  const downloadTable = async () => {\n    if (tableData.length === 0) {\n      alert(\"No table data to download!\");\n      return;\n    }\n\n    try {\n      const response = await axios.post(\n        \"http://127.0.0.1:5000/export-table\",\n        tableData,\n        { responseType: \"blob\" } // Ensure file response type\n      );\n\n      const blob = new Blob([response.data], { type: \"application/pdf\" });\n      const url = window.URL.createObjectURL(blob);\n      const link = document.createElement(\"a\");\n      link.href = url;\n      link.setAttribute(\"download\", \"ChemicalTable.pdf\"); // Set filename\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    } catch (error) {\n      console.error(\"Error exporting table:\", error);\n      alert(\"Failed to download table.\");\n    }\n  };\n\n  return (\n    <div className=\"table-page\">\n      {tableData.length > 0 && (\n        <div>\n          <table className=\"chemical-table\">\n            <thead>\n              <tr>\n                <th>Name</th>\n                <th>Molecular Weight(g/mol)</th>\n                <th>mmol</th>\n                <th>Equivalents</th>\n                <th>Melting/Boiling Point</th>\n                <th>Density</th>\n                <th>Hazards</th>\n              </tr>\n            </thead>\n            <tbody>\n              {tableData.map((row, index) => (\n                <tr key={index}>\n                  <td>{row.Name}</td>\n                  <td>{row[\"Molecular Weight\"]}</td>\n                  <td>\n                    <input\n                      type=\"number\"\n                      value={row.mmol}\n                      onChange={(e) =>\n                        handleFieldChange(index, \"mmol\", e.target.value)\n                      }\n                    />\n                  </td>\n                  <td>\n                    <input\n                      type=\"number\"\n                      value={row.Equivalents}\n                      onChange={(e) =>\n                        handleFieldChange(index, \"Equivalents\", e.target.value)\n                      }\n                    />\n                  </td>\n                  <td>{row[\"Melting Point/Boiling Point\"]}</td>\n                  <td>{row.Density}</td>\n                  <td>\n                    {Array.isArray(row.Hazards)\n                      ? row.Hazards.map((hazard, i) => (\n                          <span key={i}>\n                            {hazard}\n                            <br />\n                          </span>\n                        ))\n                      : row.Hazards}\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n          <button onClick={downloadTable} className=\"download-table-button\">\n            Download Table as PDF\n          </button>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,iBAAiB,CAAE;AAC1B,OAASC,OAAO,KAAQ,gBAAgB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEzC,cAAe,SAAS,CAAAC,SAASA,CAAA,CAAG,CAClC,KAAM,CAAEC,IAAK,CAAC,CAAGN,OAAO,CAAC,CAAC,CAAE;AAC5B,KAAM,CAACO,SAAS,CAAEC,YAAY,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACW,OAAO,CAAEC,UAAU,CAAC,CAAGZ,QAAQ,CAAC,KAAK,CAAC,CAE7C;AACA,KAAM,CAAAa,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAIL,IAAI,CAACM,MAAM,GAAK,CAAC,CAAE,CACrBC,KAAK,CAAC,sDAAsD,CAAC,CAC7D,OACF,CACAC,OAAO,CAACC,GAAG,CAAC,aAAa,CAAER,SAAS,CAAC,CACrCO,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAET,IAAI,CAAC,CAEnCI,UAAU,CAAC,IAAI,CAAC,CAChB,GAAI,CACF,KAAM,CAAAM,QAAQ,CAAG,KAAM,CAAAjB,KAAK,CAACkB,IAAI,CAC/B,sCAAsC,CACtC,CAAEX,IAAK,CACT,CAAC,CACDE,YAAY,CAACQ,QAAQ,CAACE,IAAI,CAAC,CAC7B,CAAE,MAAOC,KAAK,CAAE,CACdL,OAAO,CAACK,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CACjD,CACAT,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAEDb,SAAS,CAAC,IAAM,CACdc,aAAa,CAAC,CAAC,CACjB,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAS,iBAAiB,CAAGA,CAACC,KAAK,CAAEC,KAAK,CAAEC,KAAK,GAAK,CACjD,KAAM,CAAAC,gBAAgB,CAAG,CAAC,GAAGjB,SAAS,CAAC,CACvCiB,gBAAgB,CAACH,KAAK,CAAC,CAACC,KAAK,CAAC,CAAGC,KAAK,CACtCf,YAAY,CAACgB,gBAAgB,CAAC,CAChC,CAAC,CAED;AACA,KAAM,CAAAC,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAIlB,SAAS,CAACK,MAAM,GAAK,CAAC,CAAE,CAC1BC,KAAK,CAAC,4BAA4B,CAAC,CACnC,OACF,CAEA,GAAI,CACF,KAAM,CAAAG,QAAQ,CAAG,KAAM,CAAAjB,KAAK,CAACkB,IAAI,CAC/B,oCAAoC,CACpCV,SAAS,CACT,CAAEmB,YAAY,CAAE,MAAO,CAAE;AAC3B,CAAC,CAED,KAAM,CAAAC,IAAI,CAAG,GAAI,CAAAC,IAAI,CAAC,CAACZ,QAAQ,CAACE,IAAI,CAAC,CAAE,CAAEW,IAAI,CAAE,iBAAkB,CAAC,CAAC,CACnE,KAAM,CAAAC,GAAG,CAAGC,MAAM,CAACC,GAAG,CAACC,eAAe,CAACN,IAAI,CAAC,CAC5C,KAAM,CAAAO,IAAI,CAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC,CACxCF,IAAI,CAACG,IAAI,CAAGP,GAAG,CACfI,IAAI,CAACI,YAAY,CAAC,UAAU,CAAE,mBAAmB,CAAC,CAAE;AACpDH,QAAQ,CAACI,IAAI,CAACC,WAAW,CAACN,IAAI,CAAC,CAC/BA,IAAI,CAACO,KAAK,CAAC,CAAC,CACZN,QAAQ,CAACI,IAAI,CAACG,WAAW,CAACR,IAAI,CAAC,CACjC,CAAE,MAAOf,KAAK,CAAE,CACdL,OAAO,CAACK,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAC9CN,KAAK,CAAC,2BAA2B,CAAC,CACpC,CACF,CAAC,CAED,mBACEX,IAAA,QAAKyC,SAAS,CAAC,YAAY,CAAAC,QAAA,CACxBrC,SAAS,CAACK,MAAM,CAAG,CAAC,eACnBR,KAAA,QAAAwC,QAAA,eACExC,KAAA,UAAOuC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC/B1C,IAAA,UAAA0C,QAAA,cACExC,KAAA,OAAAwC,QAAA,eACE1C,IAAA,OAAA0C,QAAA,CAAI,MAAI,CAAI,CAAC,cACb1C,IAAA,OAAA0C,QAAA,CAAI,yBAAuB,CAAI,CAAC,cAChC1C,IAAA,OAAA0C,QAAA,CAAI,MAAI,CAAI,CAAC,cACb1C,IAAA,OAAA0C,QAAA,CAAI,aAAW,CAAI,CAAC,cACpB1C,IAAA,OAAA0C,QAAA,CAAI,uBAAqB,CAAI,CAAC,cAC9B1C,IAAA,OAAA0C,QAAA,CAAI,SAAO,CAAI,CAAC,cAChB1C,IAAA,OAAA0C,QAAA,CAAI,SAAO,CAAI,CAAC,EACd,CAAC,CACA,CAAC,cACR1C,IAAA,UAAA0C,QAAA,CACGrC,SAAS,CAACsC,GAAG,CAAC,CAACC,GAAG,CAAEzB,KAAK,gBACxBjB,KAAA,OAAAwC,QAAA,eACE1C,IAAA,OAAA0C,QAAA,CAAKE,GAAG,CAACC,IAAI,CAAK,CAAC,cACnB7C,IAAA,OAAA0C,QAAA,CAAKE,GAAG,CAAC,kBAAkB,CAAC,CAAK,CAAC,cAClC5C,IAAA,OAAA0C,QAAA,cACE1C,IAAA,UACE2B,IAAI,CAAC,QAAQ,CACbN,KAAK,CAAEuB,GAAG,CAACE,IAAK,CAChBC,QAAQ,CAAGC,CAAC,EACV9B,iBAAiB,CAACC,KAAK,CAAE,MAAM,CAAE6B,CAAC,CAACC,MAAM,CAAC5B,KAAK,CAChD,CACF,CAAC,CACA,CAAC,cACLrB,IAAA,OAAA0C,QAAA,cACE1C,IAAA,UACE2B,IAAI,CAAC,QAAQ,CACbN,KAAK,CAAEuB,GAAG,CAACM,WAAY,CACvBH,QAAQ,CAAGC,CAAC,EACV9B,iBAAiB,CAACC,KAAK,CAAE,aAAa,CAAE6B,CAAC,CAACC,MAAM,CAAC5B,KAAK,CACvD,CACF,CAAC,CACA,CAAC,cACLrB,IAAA,OAAA0C,QAAA,CAAKE,GAAG,CAAC,6BAA6B,CAAC,CAAK,CAAC,cAC7C5C,IAAA,OAAA0C,QAAA,CAAKE,GAAG,CAACO,OAAO,CAAK,CAAC,cACtBnD,IAAA,OAAA0C,QAAA,CACGU,KAAK,CAACC,OAAO,CAACT,GAAG,CAACU,OAAO,CAAC,CACvBV,GAAG,CAACU,OAAO,CAACX,GAAG,CAAC,CAACY,MAAM,CAAEC,CAAC,gBACxBtD,KAAA,SAAAwC,QAAA,EACGa,MAAM,cACPvD,IAAA,QAAK,CAAC,GAFGwD,CAGL,CACP,CAAC,CACFZ,GAAG,CAACU,OAAO,CACb,CAAC,GAhCEnC,KAiCL,CACL,CAAC,CACG,CAAC,EACH,CAAC,cACRnB,IAAA,WAAQyD,OAAO,CAAElC,aAAc,CAACkB,SAAS,CAAC,uBAAuB,CAAAC,QAAA,CAAC,uBAElE,CAAQ,CAAC,EACN,CACN,CACE,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}