{"ast":null,"code":"import React,{useState}from\"react\";import{useCart}from\"./CartContext\";// Import cart context\nimport{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";export default function NavBar(){const{cart,removeFromCart}=useCart();// Access cart data and remove functionality\nconst[showCart,setShowCart]=useState(false);// State to toggle cart dropdown visibility\nconst[showModal,setShowModal]=useState(false);const toggleCart=()=>setShowCart(prev=>!prev);// Toggle cart visibility\nconst closeModal=()=>setShowModal(false);const handleTableClick=event=>{if(cart.length===0){event.preventDefault();// Prevent navigation\nsetShowModal(true);// Show modal instead\n}};const generateTable=async()=>{try{const response=await fetch(\"http://127.0.0.1:5000/generate-table\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({cart})// Send the cart data to the backend\n});if(!response.ok){throw new Error(\"Failed to generate the table.\");}const blob=await response.blob();const url=window.URL.createObjectURL(blob);const link=document.createElement(\"a\");link.href=url;link.download=\"chemicals_table.xlsx\";// File name for the download\ndocument.body.appendChild(link);link.click();document.body.removeChild(link);}catch(error){console.error(\"Error generating table:\",error);alert(\"Failed to generate the table. Please try again.\");}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"nav\",{className:\"nav\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/\",className:\"site-title\",children:[\" \",\"Ochem Database\"]}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(CustomLink,{to:\"/about\",children:\"About\"}),/*#__PURE__*/_jsx(CustomLink,{to:\"/instructions\",children:\"Instructions\"}),/*#__PURE__*/_jsx(CustomLink,{to:\"/request\",children:\"Request A Chemical\"}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/table\",onClick:handleTableClick,className:\"generate-table-btn\",children:\"Generate Table\"}),\" \"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-icon-container\",children:[/*#__PURE__*/_jsxs(\"div\",{onClick:toggleCart,className:\"cart-icon\",children:[\"\\uD83D\\uDED2\",cart.length>0&&/*#__PURE__*/_jsx(\"span\",{className:\"cart-badge\",children:cart.length})]}),showCart&&/*#__PURE__*/_jsxs(\"div\",{className:\"cart-popup\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Cart\"}),cart.length>0?/*#__PURE__*/_jsx(\"ul\",{children:cart.map((item,index)=>/*#__PURE__*/_jsxs(\"li\",{className:\"cart-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:item.name}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeFromCart(item.name),children:\"Remove\"})]},index))}):/*#__PURE__*/_jsx(\"p\",{children:\"Your cart is empty.\"})]})]})]}),showModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Cart is Empty\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Please add a chemical to the cart to generate a table.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:closeModal,className:\"close-button\",children:\"Close\"})]})})]});}// âœ… Updated CustomLink component\nfunction CustomLink(_ref){let{to,children,...props}=_ref;const location=useLocation();// âœ… Get current URL path\nreturn/*#__PURE__*/_jsxs(\"li\",{className:location.pathname===to?\"active\":\"\",children:[/*#__PURE__*/_jsx(Link,{to:to,...props,children:children}),\" \"]});}","map":{"version":3,"names":["React","useState","useCart","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","NavBar","cart","removeFromCart","showCart","setShowCart","showModal","setShowModal","toggleCart","prev","closeModal","handleTableClick","event","length","preventDefault","generateTable","response","fetch","method","headers","body","JSON","stringify","ok","Error","blob","url","window","URL","createObjectURL","link","document","createElement","href","download","appendChild","click","removeChild","error","console","alert","children","className","Link","to","CustomLink","onClick","map","item","index","name","_ref","props","location","useLocation","pathname"],"sources":["/Users/aadi/Desktop/Ochem Database Backend/ochemdb/src/NavBar.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useCart } from \"./CartContext\"; // Import cart context\n\nexport default function NavBar() {\n  const { cart, removeFromCart } = useCart(); // Access cart data and remove functionality\n  const [showCart, setShowCart] = useState(false); // State to toggle cart dropdown visibility\n  const [showModal, setShowModal] = useState(false);\n\n  const toggleCart = () => setShowCart((prev) => !prev); // Toggle cart visibility\n\n  const closeModal = () => setShowModal(false);\n\n  const handleTableClick = (event) => {\n    if (cart.length === 0) {\n      event.preventDefault(); // Prevent navigation\n      setShowModal(true); // Show modal instead\n    }\n  };\n\n  const generateTable = async () => {\n    try {\n      const response = await fetch(\"http://127.0.0.1:5000/generate-table\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ cart }), // Send the cart data to the backend\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Failed to generate the table.\");\n      }\n\n      const blob = await response.blob();\n      const url = window.URL.createObjectURL(blob);\n      const link = document.createElement(\"a\");\n      link.href = url;\n      link.download = \"chemicals_table.xlsx\"; // File name for the download\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    } catch (error) {\n      console.error(\"Error generating table:\", error);\n      alert(\"Failed to generate the table. Please try again.\");\n    }\n  };\n\n  return (\n    <>\n      <nav className=\"nav\">\n        <Link to=\"/\" className=\"site-title\">\n          {\" \"}\n          {/* âœ… Use Link instead of <a> */}\n          Ochem Database\n        </Link>\n        <ul>\n          <CustomLink to=\"/about\">About</CustomLink>\n          <CustomLink to=\"/instructions\">Instructions</CustomLink>\n          <CustomLink to=\"/request\">Request A Chemical</CustomLink>\n          <li>\n            <Link\n              to=\"/table\"\n              onClick={handleTableClick}\n              className=\"generate-table-btn\"\n            >\n              Generate Table\n            </Link>{\" \"}\n            {/* âœ… Use Link instead of <a> */}\n          </li>\n        </ul>\n\n        <div className=\"cart-icon-container\">\n          <div onClick={toggleCart} className=\"cart-icon\">\n            ðŸ›’\n            {cart.length > 0 && (\n              <span className=\"cart-badge\">{cart.length}</span>\n            )}\n          </div>\n\n          {showCart && (\n            <div className=\"cart-popup\">\n              <h4>Cart</h4>\n              {cart.length > 0 ? (\n                <ul>\n                  {cart.map((item, index) => (\n                    <li key={index} className=\"cart-item\">\n                      <span>{item.name}</span>\n                      <button onClick={() => removeFromCart(item.name)}>\n                        Remove\n                      </button>\n                    </li>\n                  ))}\n                </ul>\n              ) : (\n                <p>Your cart is empty.</p>\n              )}\n            </div>\n          )}\n        </div>\n      </nav>\n\n      {/* Modal Popup */}\n      {showModal && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal-content\">\n            <h2>Cart is Empty</h2>\n            <p>Please add a chemical to the cart to generate a table.</p>\n            <button onClick={closeModal} className=\"close-button\">\n              Close\n            </button>\n          </div>\n        </div>\n      )}\n    </>\n  );\n}\n\n// âœ… Updated CustomLink component\nfunction CustomLink({ to, children, ...props }) {\n  const location = useLocation(); // âœ… Get current URL path\n  return (\n    <li className={location.pathname === to ? \"active\" : \"\"}>\n      <Link to={to} {...props}>\n        {children}\n      </Link>{\" \"}\n      {/* âœ… Use Link */}\n    </li>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}